{% raw %}
  <div id="html-signature">
    <main>
      <div class="editor">
        <div class="tabs">
          <div
              class="tabs__item"
              v-for="( tab, index ) in tabs"
              :class="{active: tab === activeTab}"
              :key="index + tab"
              @click="clickTab( index )"
          >
              <span>{{ tab }}</span>
          </div>
        </div>
        <div class="editor-settings">
          <div v-show="activeTab === 'Details'">
            <h3>SIGNATURE DETAILS</h3>
            <div class="details">
              <div class="details-fields">
                <div class="details-fields__item">
                  <label class="details-fields__item-label">Name</label>
                  <input class="details-fields__item-input" v-model="name" />
                </div>
                <div class="details-fields__item">
                  <label class="details-fields__item-label">Title</label>
                  <input class="details-fields__item-input" v-model="title"/>
                </div>
                <div class="details-fields__item">
                  <label class="details-fields__item-label">Company</label>
                  <input class="details-fields__item-input" v-model="company"/>
                </div>
                <div class="details-fields__item">
                  <label class="details-fields__item-label">Phone</label>
                  <input
                    class="details-fields__item-input"
                    v-model="phone"
                  />
                </div>
                <div class="details-fields__item">
                  <label class="details-fields__item-label">Website</label>
                  <input class="details-fields__item-input" v-model="website"/>
                </div>
                <div class="details-fields__item">
                  <label class="details-fields__item-label">Email</label>
                  <input class="details-fields__item-input" v-model="email"/>
                </div>
                <div v-if="isTemplateWithSignature" class="details-fields__item">
                  <label class="details-fields__item-label">Address</label>
                  <input class="details-fields__item-input" v-model="address"/>
                </div>
              </div>
              <div class="details-media">
                <div v-if="isTemplateWithImage" class="details-images">
                  <div class="details-images__box">
                    <label class="details-images__box-label" for="file">Upload image</label>
                    <input
                      @change="saveFile"
                      accept="image/jpeg, image/png"
                      class="details-images__box-input"
                      id="file"
                      type="file"
                    />
                  </div>
                  <button class="details-images__btn" v-if="isShowRemoveImage" @click="removeImage">Remove image</button>
                </div>
                <div v-if="isTemplateWithSignature" class="details-signature">
                  <div class="details-signature__box">
                    <label class="details-signature__box-label" for="signatureFile">Upload signature</label>
                    <input
                      @change="saveSignatureFile"
                      accept="image/jpeg, image/png"
                      class="details-signature__box-input"
                      id="signatureFile"
                      type="file"
                    />
                  </div>
                  <button class="details-signature__btn" v-if="isShowRemoveSignature" @click="removeSignature">Remove signature</button>
                </div>
              </div>
            </div>
          </div>
          <div v-show="activeTab === 'Social'">
            <h3>SOCIAL PROFILES</h3>
            <div class="socials">
              <div class="socials__item">
                <img alt="facebook-icon" src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/facebook.jpeg?v=1654241332" class="socials__item-icon" />
                <div class="socials__item-field">
                  <label class="socials__item-field_label">facebook.com/&lt;username&gt;</label>
                  <input type="text" class="socials__item-field_input" v-model="facebook">
                </div>
              </div>
              <div class="socials__item">
                <img alt="instagram-icon" src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/instagram.jpeg?v=1654241524" class="socials__item-icon" />
                <div class="socials__item-field">
                  <label class="socials__item-field_label">instagram.com/&lt;username&gt;</label>
                  <input type="text" class="socials__item-field_input" v-model="instagram">
                </div>
              </div>
              <div class="socials__item">
                <img alt="linkedin-icon" src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/linkedin.jpeg?v=1650184128" class="socials__item-icon" />
                <div class="socials__item-field">
                  <label class="socials__item-field_label">linkedin.com/in/&lt;username&gt;</label>
                  <input type="text" class="socials__item-field_input" v-model="linkedin">
                </div>
              </div>
              <div class="socials__item">
                <img alt="twitter-icon" src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/twitter.jpeg?v=1654241532" class="socials__item-icon" />
                <div class="socials__item-field">
                  <label class="socials__item-field_label">twitter.com/&lt;username&gt;</label>
                  <input type="text" class="socials__item-field_input" v-model="twitter">
                </div>
              </div>
              <div class="socials__item">
                <img alt="youtube-icon" src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/youtube.jpeg?v=1650184967" class="socials__item-icon" />
                <div class="socials__item-field">
                  <label class="socials__item-field_label">youtube.com/&lt;username&gt;</label>
                  <input type="text" class="socials__item-field_input" v-model="youtube">
                </div>
              </div>
              <div class="socials__item">
                <img alt="pinterest-icon" src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/pinterest.jpeg?v=1650184886" class="socials__item-icon" />
                <div class="socials__item-field">
                  <label class="socials__item-field_label">pinterest.com/&lt;username&gt;</label>
                  <input type="text" class="socials__item-field_input" v-model="pinterest">
                </div>
              </div>
            </div>
          </div>
          <div v-show="activeTab === 'Templates'">
            <h4>FREE TEMPLATES</h4>
            <div class="templates">
              <button
                @click="changeTemplates('classic')"
                class="templates__item"
                :class="{ activeTemplate: isClassicTemplate }"
              >
                <img alt="classic-template" class="templates__item_img" src="https://d1n2mpfyq0bf3x.cloudfront.net/847c74fd3c8f2c65d68f70bc032b4661/classic_v2.svg"/>
                Classic
              </button>
              <button
                @click="changeTemplates('horizontal')"
                class="templates__item"
                :class="{ activeTemplate: isHorizontalTemplate }"
              >
                <img alt="horizontal-template" class="templates__item_img" src="https://d1n2mpfyq0bf3x.cloudfront.net/847c74fd3c8f2c65d68f70bc032b4661/horizontal_v2.svg"/>
                Horizontal
              </button>
              <button
                @click="changeTemplates('wide')"
                class="templates__item"
                :class="{ activeTemplate: isWideTemplate }"
              >
                <img alt="wide-template" class="templates__item_img" src="https://d1n2mpfyq0bf3x.cloudfront.net/847c74fd3c8f2c65d68f70bc032b4661/wide_v2.svg"/>
                Wide
              </button>
            </div>
            <h4>PRO TEMPLATES</h4>
            <div class="templates">
              <button
                @click="changeTemplates('pro')"
                class="templates__item"
                :class="{ activeTemplate: isProTemplate }"
              >
                <!-- @todo поменять данные на более адекватные, как будет ясна судьба названий темплейтов -->
                <img alt="pro-template" class="templates__item_img" src="https://d1n2mpfyq0bf3x.cloudfront.net/847c74fd3c8f2c65d68f70bc032b4661/horizontal_v2.svg"/>
                Pro
              </button>
              <button
                @click="changeTemplates('pro2')"
                class="templates__item"
                :class="{ activeTemplate: isPro2Template }"
              >
                <!-- @todo поменять данные на более адекватные, как будет ясна судьба названий темплейтов -->
                <img alt="pro2-template" class="templates__item_img" src="https://d1n2mpfyq0bf3x.cloudfront.net/847c74fd3c8f2c65d68f70bc032b4661/horizontal_v2.svg"/>
                Pro 2
              </button>
              <button
                @click="changeTemplates('pro3')"
                class="templates__item"
                :class="{ activeTemplate: isPro3Template }"
              >
                <!-- @todo поменять данные на более адекватные, как будет ясна судьба названий темплейтов -->
                <img alt="pro3-template" class="templates__item_img" src="https://d1n2mpfyq0bf3x.cloudfront.net/847c74fd3c8f2c65d68f70bc032b4661/horizontal_v2.svg"/>
                Pro 3
              </button>
              <button
                @click="changeTemplates('pro4')"
                class="templates__item"
                :class="{ activeTemplate: isPro4Template }"
              >
                <!-- @todo поменять данные на более адекватные, как будет ясна судьба названий темплейтов -->
                <img alt="pro4-template" class="templates__item_img" src="https://d1n2mpfyq0bf3x.cloudfront.net/847c74fd3c8f2c65d68f70bc032b4661/horizontal_v2.svg"/>
                Pro 4
              </button>
            </div>
          </div>
          <div v-show="activeTab === 'Design'">
            <h4>FONT & COLOR</h4>
            <div>
              <div class="setup">
                <div class="setup__item">
                  <label class="setup__item_label">Font</label>
                  <div class="setup__item-content">
                    <select class="setup__item-content_select" v-model="fontFamily">
                      <option>Arial</option>
                      <option>Times new roman</option>
                      <option>Monospace</option>
                      <option>Arial black</option>
                      <option>Arial narrow</option>
                      <option>Comic sans ms</option>
                      <option>Garamond</option>
                      <option>Georgia</option>
                      <option>Tahoma</option>
                      <option>Trebuchet ms</option>
                      <option>Verdana</option>
                    </select>
                  </div>
                </div>

                <div class="setup__item">
                  <label class="setup__item_label">Font size</label>
                  <div class="setup__item-content">
                    <input type="range" min="0.5" max="1.5" step="0.1" v-model="fontSize" class="setup__item-content_range">
                  </div>
                </div>

                <div class="setup__item">
                  <label class="setup__item_label">Line spacing</label>
                  <div class="setup__item-content">
                    <button
                        class="setup__item-content_button"
                        :class="{activelinespacing: lineHeight === '0.5'}"
                        @click="changeLineHeight('0.5')"
                    >
                        0.5
                    </button>
                    <button
                        class="setup__item-content_button btn-center-norm-border"
                        :class="{activelinespacing: lineHeight === '1'}"
                        @click="changeLineHeight('1')"
                    >
                        1.0
                    </button>
                    <button
                        class="setup__item-content_button"
                        :class="{activelinespacing: lineHeight === '1.5'}"
                        @click="changeLineHeight('1.5')"
                    >
                        1.5
                    </button>
                  </div>
                </div>

                <div class="setup__item">
                  <label class="setup__item_label">Space from content</label>
                  <div class="setup__item-content">
                    <button class="setup__item-content_button" :disabled="isDisabledBtnMarginTop" @click="decreaseMarginTop">-</button>
                    <div class="setup__item-content_counter btn-center-norm-border">{{ marginTop }}</div>
                    <button class="setup__item-content_button" @click="increaseMarginTop">+</button>
                  </div>
                </div>

                <div class="setup__item">
                  <label class="setup__item_label">Template color</label>
                  <div class="setup__item-content">
                    <div
                        @click="changeColor('teal')"
                        class="setup__item-content_picker-color teal"
                        :class="{activeColor: color === 'teal'}"
                    ></div>
                    <div
                        @click="changeColor('maroon')"
                        class="setup__item-content_picker-color maroon"
                        :class="{activeColor: color === 'maroon'}"
                    ></div>
                    <div
                        @click="changeColor('darkgreen')"
                        class="setup__item-content_picker-color darkgreen"
                        :class="{activeColor: color === 'darkgreen'}"
                    ></div>
                    <div
                        @click="changeColor('chartreuse')"
                        class="setup__item-content_picker-color chartreuse"
                        :class="{activeColor: color === 'chartreuse'}"
                    ></div>
                    <div
                        @click="changeColor('turquoise')"
                        class="setup__item-content_picker-color turquoise"
                        :class="{activeColor: color === 'turquoise'}"
                    ></div>
                    <div
                        @click="changeColor('brown')"
                        class="setup__item-content_picker-color brown"
                        :class="{activeColor: color === 'brown'}"
                    ></div>
                    <div
                        @click="changeColor('purple')"
                        class="setup__item-content_picker-color purple"
                        :class="{activeColor: color === 'purple'}"
                    ></div>
                    <input
                      type="color"
                      class="setup__item-content_picker-color custom-color"
                      v-model="color"
                    />
                  </div>
                </div>
              </div>
            </div>
            <h4>IMAGES</h4>
            <div>
              <div class="setup">
                <div class="setup__item">
                  <label class="setup__item_label">Shape</label>
                  <div class="setup__item-content">
                    <button
                        class="setup__item-content_button"
                        :class="{activeImageBtn: typeShape === 'square'}"
                        @click="changeTypeShape('square')"
                    >
                      square
                    </button>
                    <button
                        class="setup__item-content_button btn-center-norm-border"
                        :class="{activeImageBtn: typeShape === 'rounded'}"
                        @click="changeTypeShape('rounded')"
                    >
                      rounded
                    </button>
                    <button
                        class="setup__item-content_button"
                        :class="{activeImageBtn: typeShape === 'circle'}"
                        @click="changeTypeShape('circle')"
                    >
                      circle
                    </button>
                  </div>
                </div>
                <div class="setup__item">
                  <label class="setup__item_label">Image size</label>
                  <div class="setup__item-content">
                    <input type="range" :min="minImageSize" :max="maxImageSize" step="1" v-model="imageSize" class="setup__item-content_range">
                  </div>
                </div>
                <div class="setup__item">
                  <label class="setup__item_label">Image link</label>
                  <div class="setup__item-content">
                    <div class="setup__item-content-wrapper-for-input">
                      <input :class="{invalibleLinkInput: isInvalibleImageLink === true}" v-model="imageLink" placeholder="www.mywebsite.com" class="setup__item-content_input" />
                      <label class="invalibleLinkLabel" v-if="isInvalibleImageLink">Link is long</label>
                    </div>
                  </div>
                </div>
                <div class="setup__item">
                  <label class="setup__item_label">Signature size</label>
                  <div class="setup__item-content">
                    <input type="range" min="86" max="172" step="1" v-model="signatureSize" class="setup__item-content_range">
                  </div>
                </div>
                <div class="setup__item">
                  <label class="setup__item_label">Signature link</label>
                  <div class="setup__item-content">
                    <div class="setup__item-content-wrapper-for-input">
                      <input :class="{invalibleLinkInput: isInvalibleSignatureLink === true}" v-model="signatureLink" placeholder="www.mywebsite.com" class="setup__item-content_input" />
                      <label class="invalibleLinkLabel" v-if="isInvalibleSignatureLink">Link is long</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <h4>BACKGROUND</h4>
            <div>
              <div class="setup">
                <div class="setup__item">
                  <label class="setup__item_label">Background Link</label>
                  <div class="setup__item-content">
                    <div class="setup__item-content-wrapper-for-input">
                      <input :class="{invalibleLinkInput: isInvalibleBackgroundLink === true}" placeholder="https://imgur.com/i9er3Kl" v-model="backgroundLink" class="setup__item-content_input" />
                      <label class="invalibleLinkLabel" v-if="isInvalibleBackgroundLink">Link is long</label>
                    </div>
                  </div>
                </div>
                <div class="setup__item">
                  <label class="setup__item_label">Background file</label>
                  <div class="setup__item-content">
                    <div class="setup__item-content-box">
                      <label
                        class="setup__item-content-box_label"
                        for="fileBackground"
                      >
                        Upload background
                      </label>
                      <input
                        @change="saveFileBackground"
                        class="setup__item-content-box_file"
                        type="file"
                        id="fileBackground"
                        accept="image/jpeg, image/png"
                      />
                      <span
                        v-if="fileBackground"
                        class="setup__item-content-box_spec_symbol"
                        @click="clearBackground"
                      >
                        &#215;
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="preview">
        <div class="preview-pane">
          <header class="preview-pane-header">
            <div class="preview-pane-header__dots"></div>
            <div class="preview-pane-header__dots"></div>
            <div class="preview-pane-header__dots"></div>
          </header>
          <div class="preview-pane-details">
            <div class="preview-pane-details__item">
              <span class="preview-pane-details__item-title">To: </span><span class="preview-pane-details__item-to">Troy McLaughlin</span>
            </div>
            <div class="preview-pane-details__item">
              <span class="preview-pane-details__item-title">Subject: </span><span class="preview-pane-details__item-text">Check out my new email signature</span>
            </div>
          </div>
          <div ref="signature" :style="stylesPreviewTemplate">
            <table
              v-if="isFreeTemplate"
              :style="stylesPreviewTable"
            >
              <tbody>
                <tr>
                  <td>
                    <table>
                      <tbody>
                        <tr>
                          <td
                            :style="stylesPreviewBlockImage"
                            :ref="`${template}UserImage`"
                          ></td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                  <td :style="stylesPreviewMainContent">
                    <table>
                      <tbody :style="stylesPreviewMainContentBody">
                        <tr>
                          <td>
                            <tr>
                              <td colspan="3">
                                <table>
                                  <tbody>
                                    <tr>
                                      <td colspan="3" :style="{fontFamily: fontFamily, fontSize: `${fontSize}em`}">
                                        <h4
                                          :style="stylesPreviewContentFieldName"
                                        >
                                          {{ name }}
                                        </h4>
                                      </td>
                                    </tr>
                                    <tr :style="stylesPreviewPadding">
                                      <td :style="{fontFamily: fontFamily, fontSize: `${fontSize}em`}">
                                        <span
                                          :style="stylesPreviewContentFieldTitle"
                                        >
                                          {{ title }}
                                        </span>
                                        <span
                                          v-if="isShowSeparatorForBasicInfo"
                                          :style="stylesPreviewContentSeparatorText"
                                        >
                                          {{ textForSeparator }}
                                        </span>
                                        <span
                                          :style="stylesPreviewContentFieldCompany"
                                        >
                                          {{ company }}
                                        </span>
                                      </td>
                                      <td
                                        v-if="isWideTemplate"
                                        :style="{...stylesPreviewSocialsNetworks, fontFamily: fontFamily, marginTop: '0px', marginLeft: '12px'}"
                                      >
                                        <a
                                          v-if="facebook"
                                          target="_blank"
                                          :href="`https://facebook.com/${facebook}`"
                                          :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                        >
                                          <img
                                            alt="facebook-icon"
                                            :src="linkImageFacebook"
                                            :style="stylesPreviewSocialsNetworksItemImage"
                                          />
                                        </a>
                                        <a
                                          v-if="instagram"
                                          target="_blank"
                                          :href="`https://instagram.com/${instagram}`"
                                          :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                        >
                                          <img
                                            alt="instagram-icon"
                                            :src="linkImageInstagram"
                                            :style="stylesPreviewSocialsNetworksItemImage"
                                          />
                                        </a>
                                        <a
                                          v-if="linkedin"
                                          target="_blank"
                                          :href="`https://linkedin.com/in/${linkedin}`"
                                          :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                        >
                                          <img
                                            alt="linkedin-icon"
                                            :src="linkImageLinkedin"
                                            :style="stylesPreviewSocialsNetworksItemImage"
                                          />
                                        </a>
                                        <a
                                          v-if="twitter"
                                          target="_blank"
                                          :href="`https://twitter.com/${twitter}`"
                                          :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                        >
                                          <img
                                            alt="twitter-icon"
                                            :src="linkImageTwitter"
                                            :style="stylesPreviewSocialsNetworksItemImage"
                                          />
                                        </a>
                                        <a
                                          v-if="youtube"
                                          target="_blank"
                                          :href="`https://youtube.com/${youtube}`"
                                          :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                        >
                                          <img
                                            alt="youtube-icon"
                                            :src="linkImageYoutube"
                                            :style="stylesPreviewSocialsNetworksItemImage"
                                          />
                                        </a>
                                        <a
                                          v-if="pinterest"
                                          target="_blank"
                                          :href="`https://pinterest.com/${pinterest}`"
                                          :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                        >
                                          <img
                                            alt="pinterest-icon"
                                            :src="linkImagePinterest"
                                            :style="stylesPreviewSocialsNetworksItemImage"
                                          />
                                        </a>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </td>
                            </tr>
                            <tr v-if="( isHorizontalTemplate || isWideTemplate ) && hasImage">
                              <td colspan="3">
                                <hr
                                  :style="{...stylesPreviewContentSeparatorLine}"
                                />
                              </td>
                            </tr>
                            <tr :style="{...stylesPreviewContactContent, fontSize: `${fontSize}em`}">
                              <td
                                :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily}"
                                v-if="phone"
                                >
                                <img
                                  alt="phone-icon"
                                  v-if="phone && isHorizontalTemplate"
                                  :style="stylesPreviewContactContentItemIcon"
                                  src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/phone.svg?v=1650658409"
                                />
                                <span
                                  v-if="isWideTemplate"
                                  :style="{...stylesPreviewContactContentItemSpan}"
                                >
                                  N
                                </span>
                                <a :href="`tel:${phone}`" :style="stylesPreviewContactContentItemLink" >
                                  {{ phone }}
                                </a>
                              </td>
                              <td
                                :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily}"
                                v-if="website"
                                >
                                <img
                                  alt="website-icon"
                                  v-if="website && isHorizontalTemplate"
                                  :style="stylesPreviewContactContentItemIcon"
                                  src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/website.svg?v=1650658415"
                                />
                                <span
                                  v-if="isWideTemplate"
                                  :style="{...stylesPreviewContactContentItemSpan}"
                                >
                                  W
                                </span>
                                <a :href="website" :style="stylesPreviewContactContentItemLink" target="_blank">{{ website }}</a>
                              </td>
                              <td
                                :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily}"
                                v-if="email"
                                >
                                <img
                                  alt="email-icon"
                                  v-if="email && isHorizontalTemplate"
                                  :style="stylesPreviewContactContentItemIcon"
                                  src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/email.svg?v=1650658399"
                                />
                                <span
                                  v-if="isWideTemplate"
                                  :style="{...stylesPreviewContactContentItemSpan}"
                                >
                                  E
                                </span>
                                <a :href="`mailto:${email}`" :style="stylesPreviewContactContentItemLink">{{ email }}</a>
                              </td>
                            </tr>
                            <tr v-if="isWideTemplate && hasImage">
                              <td colspan="3">
                                <hr
                                  :style="{...stylesPreviewContentSeparatorLine}"
                                />
                              </td>
                            </tr>
                            <tr
                              v-if="!isWideTemplate"
                              :style="stylesPreviewSocialsNetworks"
                            >
                              <td :style="{fontFamily: fontFamily, display: 'flex'}">
                                <a
                                  v-if="facebook"
                                  target="_blank"
                                  :href="`https://facebook.com/${facebook}`"
                                  :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                >
                                  <img
                                    alt="facebook-icon"
                                    :src="linkImageFacebook"
                                    :style="stylesPreviewSocialsNetworksItemImage"
                                  />
                                </a>
                                <a
                                  v-if="instagram"
                                  target="_blank"
                                  :href="`https://instagram.com/${instagram}`"
                                  :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                >
                                  <img
                                    alt="instagram-icon"
                                    :src="linkImageInstagram"
                                    :style="stylesPreviewSocialsNetworksItemImage"
                                  />
                                </a>
                                <a
                                  v-if="linkedin"
                                  target="_blank"
                                  :href="`https://linkedin.com/in/${linkedin}`"
                                  :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                >
                                  <img
                                    alt="linkedin-icon"
                                    :src="linkImageLinkedin"
                                    :style="stylesPreviewSocialsNetworksItemImage"
                                  />
                                </a>
                                <a
                                  v-if="twitter"
                                  target="_blank"
                                  :href="`https://twitter.com/${twitter}`"
                                  :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                >
                                  <img
                                    alt="twitter-icon"
                                    :src="linkImageTwitter"
                                    :style="stylesPreviewSocialsNetworksItemImage"
                                  />
                                </a>
                                <a
                                  v-if="youtube"
                                  target="_blank"
                                  :href="`https://youtube.com/${youtube}`"
                                  :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                >
                                  <img
                                    alt="youtube-icon"
                                    :src="linkImageYoutube"
                                    :style="stylesPreviewSocialsNetworksItemImage"
                                  />
                                </a>
                                <a
                                  v-if="pinterest"
                                  target="_blank"
                                  :href="`https://pinterest.com/${pinterest}`"
                                  :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                >
                                  <img
                                    alt="pinterest-icon"
                                    :src="linkImagePinterest"
                                    :style="stylesPreviewSocialsNetworksItemImage"
                                  />
                                </a>
                              </td>
                            </tr>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>
              </tbody>
            </table>

            <table
              v-if="isProTemplate"
              :style="stylesPreviewTable"
            >
              <tbody :style="stylesPreviewMainContentBody">
                <tr>
                  <td
                    :style="stylesPreviewBlockSignature"
                    ref="proUserSignature"
                  ></td>
                </tr>
                <tr>
                  <td :style="{display: 'flex', justifyContent: 'center'}">
                    <table :style="{fontSize: `${fontSize}em`,}">
                      <tbody>
                        <tr>
                          <td>
                            <div :style="stylesPreviewContentInfoFields">
                              <span
                                :style="stylesPreviewContentFieldName"
                              >
                                {{ name }}
                              </span>
                              <span
                                v-if="title || company"
                                :style="stylesPreviewContentNameSeparator"
                              >
                              </span>
                              <span
                                :style="stylesPreviewContentFieldTitle"
                              >
                                {{ title }}
                              </span>
                              <span
                                v-if="isShowSeparatorForBasicInfo"
                                :style="{...stylesPreviewContentSeparatorText, whiteSpace: 'pre'}"
                              >
                                {{ textForSeparator }}
                              </span>
                              <span
                                :style="stylesPreviewContentFieldCompany"
                              >
                                {{ company }}
                              </span>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>
                <tr v-if="hasContacts">
                  <td>
                    <hr
                      :style="stylesPreviewContentSeparatorLine"
                    />
                  </td>
                </tr>
                <tr>
                  <td :style="{...stylesPreviewContactContent, fontSize: `${fontSize}em`,}">
                    <div
                      :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily}"
                      v-if="phone"
                    >
                      <img
                        alt="phone-icon"
                        :style="stylesPreviewContactContentItemIcon"
                        src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/phone.svg?v=1650658409"
                      />
                      <a :href="`tel:${phone}`" :style="stylesPreviewContactContentItemLink" >
                        {{ phone }}
                      </a>
                    </div>
                    <div
                      :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily}"
                      v-if="website"
                    >
                      <img
                        alt="website-icon"
                        :style="stylesPreviewContactContentItemIcon"
                        src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/website.svg?v=1650658415"
                      />
                      <a :href="website" :style="stylesPreviewContactContentItemLink" target="_blank">{{ website }}</a>
                    </div>
                    <div
                      :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily}"
                      v-if="email"
                    >
                      <img
                        alt="email-icon"
                        :style="stylesPreviewContactContentItemIcon"
                        src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/email.svg?v=1650658399"
                      />
                      <a :href="`mailto:${email}`" :style="stylesPreviewContactContentItemLink">{{ email }}</a>
                    </div>
                    <div
                      :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily}"
                      v-if="address"
                    >
                      <img
                        alt="address-icon"
                        :style="stylesPreviewContactContentItemIcon"
                        src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/home-outlined.svg?v=1656661321"
                      />
                      <span :style="{...stylesPreviewContactContentItemLink, color: '#000000'}">{{ address }}</span>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>

            <table
              v-if="isPro2Template"
              :style="stylesPreviewTable"
            >
              <tbody>
                <tr>
                  <td>
                    <table>
                      <tbody>
                        <tr>
                          <td
                            :style="stylesPreviewBlockSignature"
                            ref="pro2UserSignature"
                          ></td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                  <td :style="stylesPreviewMainContent">
                    <table>
                      <tbody :style="stylesPreviewMainContentBody">
                        <tr>
                          <td>
                            <tr :style="stylesPreviewContentInfoFields">
                              <td :style="{fontFamily: fontFamily}">
                                <h4
                                  :style="stylesPreviewContentFieldName"
                                >
                                  {{ name }}
                                </h4>
                                <span
                                  :style="stylesPreviewContentFieldTitle"
                                >
                                  {{ title }}
                                </span>
                                <span
                                  v-if="isShowSeparatorForBasicInfo"
                                  :style="stylesPreviewContentSeparatorText"
                                >
                                  {{ textForSeparator }}
                                </span>
                                <span
                                  :style="stylesPreviewContentFieldCompany"
                                >
                                  {{ company }}
                                </span>
                              </td>
                              <td :style="{fontFamily: fontFamily, marginTop: '0px'}">
                                <ul style="list-style-type: none; padding: 0; margin: 0;">
                                  <li
                                    :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily}"
                                    v-if="phone"
                                  >
                                    <img
                                      alt="phone-icon"
                                      v-if="phone"
                                      :style="stylesPreviewContactContentItemIcon"
                                      src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/phone.svg?v=1650658409"
                                    />
                                    <a :href="`tel:${phone}`" :style="stylesPreviewContactContentItemLink">
                                      {{ phone }}
                                    </a>
                                  </li>
                                  <li
                                    :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily}"
                                    v-if="website"
                                  >
                                    <img
                                      alt="website-icon"
                                      v-if="website"
                                      :style="stylesPreviewContactContentItemIcon"
                                      src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/website.svg?v=1650658415"
                                    />
                                    <a :href="website" target="_blank" :style="stylesPreviewContactContentItemLink">{{ website }}</a>
                                  </li>
                                  <li
                                    :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily}"
                                    v-if="email"
                                  >
                                    <img
                                      alt="email-icon"
                                      v-if="email"
                                      :style="stylesPreviewContactContentItemIcon"
                                      src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/email.svg?v=1650658399"
                                    />
                                    <a :href="`mailto:${email}`" :style="stylesPreviewContactContentItemLink">{{ email }}</a>
                                  </li>
                                  <li
                                    :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily, marginBottom: '0'}"
                                    v-if="address"
                                  >
                                    <img
                                      alt="address-icon"
                                      v-if="address"
                                      :style="stylesPreviewContactContentItemIcon"
                                      src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/home-outlined.svg?v=1656661321"
                                    />
                                    <span :style="{...stylesPreviewContactContentItemLink, color: '#000000'}">{{ address }}</span>
                                  </li>
                                </ul>
                              </td>
                            </tr>
                            <tr v-if="hasSocials">
                              <td colspan="2">
                                <hr
                                  :style="{...stylesPreviewContentSeparatorLine}"
                                />
                              </td>
                            </tr>
                            <tr v-if="hasSocials" :style="stylesPreviewSocialsNetworks">
                              <td colspan="2" :style="{fontFamily: fontFamily}">
                                <a
                                  v-if="facebook"
                                  target="_blank"
                                  :href="`https://facebook.com/${facebook}`"
                                  :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                >
                                  <img
                                    alt="facebook-icon"
                                    :src="linkImageFacebook"
                                    :style="stylesPreviewSocialsNetworksItemImage"
                                  />
                                </a>
                                <a
                                  v-if="instagram"
                                  target="_blank"
                                  :href="`https://instagram.com/${instagram}`"
                                  :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                >
                                  <img
                                    alt="instagram-icon"
                                    :src="linkImageInstagram"
                                    :style="stylesPreviewSocialsNetworksItemImage"
                                  />
                                </a>
                                <a
                                  v-if="linkedin"
                                  target="_blank"
                                  :href="`https://linkedin.com/in/${linkedin}`"
                                  :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                >
                                  <img
                                    alt="linkedin-icon"
                                    :src="linkImageLinkedin"
                                    :style="stylesPreviewSocialsNetworksItemImage"
                                  />
                                </a>
                                <a
                                  v-if="twitter"
                                  target="_blank"
                                  :href="`https://twitter.com/${twitter}`"
                                  :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                >
                                  <img
                                    alt="twitter-icon"
                                    :src="linkImageTwitter"
                                    :style="stylesPreviewSocialsNetworksItemImage"
                                  />
                                </a>
                                <a
                                  v-if="youtube"
                                  target="_blank"
                                  :href="`https://youtube.com/${youtube}`"
                                  :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                >
                                  <img
                                    alt="youtube-icon"
                                    :src="linkImageYoutube"
                                    :style="stylesPreviewSocialsNetworksItemImage"
                                  />
                                </a>
                                <a
                                  v-if="pinterest"
                                  target="_blank"
                                  :href="`https://pinterest.com/${pinterest}`"
                                  :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                                >
                                  <img
                                    alt="pinterest-icon"
                                    :src="linkImagePinterest"
                                    :style="stylesPreviewSocialsNetworksItemImage"
                                  />
                                </a>
                              </td>
                            </tr>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>
              </tbody>
            </table>

            <table
              v-show="isPro3Template"
              :style="stylesPreviewTable"
            >
              <tbody>
                <tr :style="{display: 'flex', gap: `${fontSize*30}px`}">
                  <td style="align-self: center;">
                    <table>
                      <tbody>
                        <tr>
                          <td
                            :style="stylesPreviewBlockSignature"
                            ref="pro3UserSignature"
                          ></td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                  <td v-if="hasSignatureLink">
                    <div :style="{...stylesPreviewContentSeparatorHLine}"></div>
                  </td>
                  <td :style="stylesPreviewMainContent">
                    <table>
                      <tbody :style="stylesPreviewMainContentBody">
                        <tr>
                          <td :style="{fontSize: `${fontSize}em`, display: 'flex', flexDirection: 'column', alignItems: 'center',}">
                            <h4
                              :style="stylesPreviewContentFieldName"
                            >
                              {{ name }}
                            </h4>
                            <div :style="{marginBottom: `${fontSize*4}px`}">
                              <span
                                :style="stylesPreviewContentFieldTitle"
                              >
                                {{ title }}
                              </span>
                              <span
                                v-if="isShowSeparatorForBasicInfo"
                                :style="stylesPreviewContentSeparatorText"
                              >
                                {{ textForSeparator }}
                              </span>
                              <span
                                :style="stylesPreviewContentFieldCompany"
                              >
                                {{ company }}
                              </span>
                            </div>
                          </td>
                        </tr>
                        <tr v-if="hasContacts || hasSocials" style="align-self: stretch;">
                          <td :style="{display: 'block'}">
                            <hr
                              :style="{...stylesPreviewContentSeparatorLine, borderTopWidth: `${fontSize*8}px !important`, width: '50%', margin: 'auto', marginBottom: `${fontSize*16}px`}"
                            />
                          </td>
                        </tr>
                        <tr v-if="hasContacts">
                          <td :style="{display: 'flex', flexDirection: 'column', alignItems: 'center', fontSize: `${fontSize}em`, gap: `${Math.max(fontSize, 1)*2}px`}">
                            <a v-if="phone" :href="`tel:${phone}`" :style="stylesPreviewContactContentItemLink" >{{ phone }}</a>
                            <a v-if="website" :href="website" :style="stylesPreviewContactContentItemLink" target="_blank">{{ website }}</a>
                            <a v-if="email" :href="`mailto:${email}`" :style="stylesPreviewContactContentItemLink">{{ email }}</a>
                            <span v-if="address" :style="{...stylesPreviewContactContentItemLink, color: '#000000'}">{{ address }}</span>
                          </td>
                        </tr>
                        <tr v-if="hasSocials" :style="{...stylesPreviewSocialsNetworks, alignSelf: 'center', marginTop: `${fontSize*20}px`}">
                          <td :style="{fontFamily: fontFamily}">
                            <a
                              v-if="facebook"
                              target="_blank"
                              :href="`https://facebook.com/${facebook}`"
                              :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                            >
                              <img
                                alt="facebook-icon"
                                :src="linkImageFacebook"
                                :style="stylesPreviewSocialsNetworksItemImage"
                              />
                            </a>
                            <a
                              v-if="instagram"
                              target="_blank"
                              :href="`https://instagram.com/${instagram}`"
                              :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                            >
                              <img
                                alt="instagram-icon"
                                :src="linkImageInstagram"
                                :style="stylesPreviewSocialsNetworksItemImage"
                              />
                            </a>
                            <a
                              v-if="linkedin"
                              target="_blank"
                              :href="`https://linkedin.com/in/${linkedin}`"
                              :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                            >
                              <img
                                alt="linkedin-icon"
                                :src="linkImageLinkedin"
                                :style="stylesPreviewSocialsNetworksItemImage"
                              />
                            </a>
                            <a
                              v-if="twitter"
                              target="_blank"
                              :href="`https://twitter.com/${twitter}`"
                              :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                            >
                              <img
                                alt="twitter-icon"
                                :src="linkImageTwitter"
                                :style="stylesPreviewSocialsNetworksItemImage"
                              />
                            </a>
                            <a
                              v-if="youtube"
                              target="_blank"
                              :href="`https://youtube.com/${youtube}`"
                              :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                            >
                              <img
                                alt="youtube-icon"
                                :src="linkImageYoutube"
                                :style="stylesPreviewSocialsNetworksItemImage"
                              />
                            </a>
                            <a
                              v-if="pinterest"
                              target="_blank"
                              :href="`https://pinterest.com/${pinterest}`"
                              :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                            >
                              <img
                                alt="pinterest-icon"
                                :src="linkImagePinterest"
                                :style="stylesPreviewSocialsNetworksItemImage"
                              />
                            </a>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                  <td v-if="hasImageLink">
                    <div :style="{...stylesPreviewContentSeparatorHLine}"></div>
                  </td>
                  <td style="align-self: center;">
                    <table>
                      <tbody>
                        <tr>
                          <td
                            :style="stylesPreviewBlockImage"
                            ref="pro3UserImage"
                          ></td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>
              </tbody>
            </table>

            <table
              v-show="isPro4Template"
              :style="stylesPreviewTable"
            >
              <tbody>
                <tr :style="{display: 'flex'}">
                  <td v-if="hasImageLink" :style="{alignSelf: 'center'}">
                    <table>
                      <tbody>
                        <tr>
                          <td
                            :style="stylesPreviewBlockImage"
                            ref="pro4UserImage"
                          ></td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                  <td :style="{...stylesPreviewMainContent, alignSelf: 'flex-end', marginLeft: `${fontSize*28}px`}">
                    <table>
                      <tbody :style="stylesPreviewMainContentBody">
                        <tr>
                          <td :style="{fontSize: `${fontSize}em`, display: 'flex', flexDirection: 'column'}">
                            <h4
                              :style="stylesPreviewContentFieldName"
                            >
                              {{ name }}
                            </h4>
                            <div>
                              <span
                                :style="stylesPreviewContentFieldTitle"
                              >
                                {{ title }}
                              </span>
                              <span
                                v-if="isShowSeparatorForBasicInfo"
                                :style="stylesPreviewContentSeparatorText"
                              >
                                {{ textForSeparator }}
                              </span>
                              <span
                                :style="stylesPreviewContentFieldCompany"
                              >
                                {{ company }}
                              </span>
                            </div>
                          </td>
                        </tr>
                        <tr v-if="hasContacts" style="align-self: stretch;">
                          <td :style="{display: 'block'}">
                            <hr
                              :style="stylesPreviewContentSeparatorLine"
                            />
                          </td>
                        </tr>
                        <tr v-if="hasContacts">
                          <td>
                            <ul :style="{
                              listStyleType: 'none',
                              padding: '0',
                              margin: '0',
                              display: 'flex',
                              flexDirection: 'column',
                              fontSize: `${fontSize}em`,
                              gap: `${Math.max(fontSize, 1)*2}px`
                            }">
                              <li
                                :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily}"
                                v-if="phone"
                              >
                                <img
                                  alt="phone-icon"
                                  v-if="phone"
                                  :style="stylesPreviewContactContentItemIcon"
                                  src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/phone.svg?v=1650658409"
                                />
                                <a :href="`tel:${phone}`" :style="stylesPreviewContactContentItemLink">
                                  {{ phone }}
                                </a>
                              </li>
                              <li
                                :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily}"
                                v-if="website"
                              >
                                <img
                                  alt="website-icon"
                                  v-if="website"
                                  :style="stylesPreviewContactContentItemIcon"
                                  src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/website.svg?v=1650658415"
                                />
                                <a :href="website" target="_blank" :style="stylesPreviewContactContentItemLink">{{ website }}</a>
                              </li>
                              <li
                                :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily}"
                                v-if="email"
                              >
                                <img
                                  alt="email-icon"
                                  v-if="email"
                                  :style="stylesPreviewContactContentItemIcon"
                                  src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/email.svg?v=1650658399"
                                />
                                <a :href="`mailto:${email}`" :style="stylesPreviewContactContentItemLink">{{ email }}</a>
                              </li>
                              <li
                                :style="{...stylesPreviewContactContentItem, fontFamily: fontFamily, marginBottom: '0'}"
                                v-if="address"
                              >
                                <img
                                  alt="address-icon"
                                  v-if="address"
                                  :style="stylesPreviewContactContentItemIcon"
                                  src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/home-outlined.svg?v=1656661321"
                                />
                                <span :style="{...stylesPreviewContactContentItemLink, color: '#000000'}">{{ address }}</span>
                              </li>
                            </ul>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                  <td :style="{alignSelf: 'flex-end', marginLeft: `${fontSize*160}px`}">
                    <table>
                      <tbody>
                        <tr>
                          <td
                            :style="{...stylesPreviewBlockSignature, marginLeft: 'auto', marginRight: 'auto'}"
                            ref="pro4UserSignature"
                          ></td>
                        </tr>
                        <tr v-if="hasSocials" :style="{...stylesPreviewSocialsNetworks, marginTop: `${fontSize*20}px`}">
                          <td :style="{fontFamily: fontFamily, marginLeft: 'auto'}">
                            <a
                              v-if="facebook"
                              target="_blank"
                              :href="`https://facebook.com/${facebook}`"
                              :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                            >
                              <img
                                alt="facebook-icon"
                                :src="linkImageFacebook"
                                :style="stylesPreviewSocialsNetworksItemImage"
                              />
                            </a>
                            <a
                              v-if="instagram"
                              target="_blank"
                              :href="`https://instagram.com/${instagram}`"
                              :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                            >
                              <img
                                alt="instagram-icon"
                                :src="linkImageInstagram"
                                :style="stylesPreviewSocialsNetworksItemImage"
                              />
                            </a>
                            <a
                              v-if="linkedin"
                              target="_blank"
                              :href="`https://linkedin.com/in/${linkedin}`"
                              :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                            >
                              <img
                                alt="linkedin-icon"
                                :src="linkImageLinkedin"
                                :style="stylesPreviewSocialsNetworksItemImage"
                              />
                            </a>
                            <a
                              v-if="twitter"
                              target="_blank"
                              :href="`https://twitter.com/${twitter}`"
                              :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                            >
                              <img
                                alt="twitter-icon"
                                :src="linkImageTwitter"
                                :style="stylesPreviewSocialsNetworksItemImage"
                              />
                            </a>
                            <a
                              v-if="youtube"
                              target="_blank"
                              :href="`https://youtube.com/${youtube}`"
                              :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                            >
                              <img
                                alt="youtube-icon"
                                :src="linkImageYoutube"
                                :style="stylesPreviewSocialsNetworksItemImage"
                              />
                            </a>
                            <a
                              v-if="pinterest"
                              target="_blank"
                              :href="`https://pinterest.com/${pinterest}`"
                              :style="{...stylesPreviewSocialsNetworksItem, background: defineColor}"
                            >
                              <img
                                alt="pinterest-icon"
                                :src="linkImagePinterest"
                                :style="stylesPreviewSocialsNetworksItemImage"
                              />
                            </a>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="preview-pane-buttons-config">
            <button
              class="preview-pane-buttons-config__save" @click="saveSignatureDTO"
            >
              Save signature
            </button>
            <div class="preview-pane-buttons-config-install">
              <span class="preview-pane-buttons-config-install__title">Install:</span>
              <img
                id="g_id_onload"
                @click="handleAuthClick"
                data-auto_prompt="false"
                src="https://d1n2mpfyq0bf3x.cloudfront.net/25fd1656f988fc225b58d51011c76026/gmail.svg"
                alt="gmail-icon"
                class="preview-pane-buttons-config-install__item"
              />
              <a
                class="preview-pane-buttons-config-install__item"
                @click="exportSignatureToHtml"
              >
                <img
                  alt="export-file"
                  src="https://cdn.shopify.com/s/files/1/0594/4639/5086/t/55/assets/file-export-solid.svg?v=1655141909" />
              </a>
            </div>
          </div>
        </div>
      </div>
      <div
        v-if="isShowSelectAliase"
        class="alert-wrapper"
      >
        <div class="alert-content">
          <h5>Сhoose a aliase for changing:</h5>
          <form>
            <label
              class="alert-content__label"
              v-for="( aliase, index ) in aliases"
              :key="index + aliase"
            >
              <input
                :value="aliase"
                type="radio"
                v-model="selectedAliase"
              />
              {{ aliase.sendAsEmail }}
            </label>
          </form>
        </div>
      </div>
    </main>
  </div>
{% endraw %}

<script type="module">
  import { createApp } from 'vue';

  let tokenClient;
  let gapiInited = false;
  let gisInited = false;

  const documentWidth = document.documentElement.clientWidth;
  const documentSize = {
    large: documentWidth < 1199 && documentWidth > 991,
    medium: documentWidth < 991 && documentWidth > 767,
    small: documentWidth < 767 && documentWidth > 575,
    xSmall: documentWidth < 575,
  };

  const htmlSignature = {
    data() {
      return {
        name: '',
        title: '',
        company: '',
        phone: null,
        website: '',
        file: null,
        fileUrl: '',
        signatureFile: null,
        signatureFileUrl: '',
        email: '',
        address: '',

        facebook: '',
        instagram: '',
        linkedin: '',
        twitter: '',
        youtube: '',
        pinterest: '',

        template: 'classic',

        fontSize: '1',
        lineHeight: '1',
        marginTop: 0,
        fontFamily: 'Arial',
        color: '',
        typeShape: '',
        imageSize: '129', // px
        imageLink: '',
        isInvalibleImageLink: false,
        signatureSize: '129', // px
        signatureLink: '',
        isInvalibleSignatureLink: false,
        backgroundLink: '',
        isInvalibleBackgroundLink: false,
        fileBackground: null,

        activeTab: 'Details',

        isShowRemoveImage: false,
        isShowRemoveSignature: false,
        isShowSelectAliase: false,

        tabs: ['Details', 'Social', 'Templates', 'Design'],

        aliases: [],
        selectedAliase: null,

        minImageSize: 76,
        maxImageSize: 142,
      };
    },

    mounted () {
      gapi.load('client', this.intializeGapiClient);
      this.tokenClient = google.accounts.oauth2.initTokenClient({
        client_id: '841400562900-oo7irmg1v2hjhu6uhs3in3tfn59epbqr.apps.googleusercontent.com',
        scope: 'https://www.googleapis.com/auth/gmail.settings.basic',
        callback: '',
      });
      this.gisInited = true;
    },

    methods: {
      async intializeGapiClient() {
         await gapi.client.init({
            apiKey: 'AIzaSyBR0osgIQVY4kT2-doTogOtMkjEY7tTNoE',
            discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest'],
         });
         this.gapiInited = true;
      },

      handleAuthClick() {
        this.tokenClient.callback = async (resp) => {
          if (resp.error !== undefined) {
            throw (resp);
          }
          await this.getAliases();
          await this.updateSignature();
        };

        if (gapi.client.getToken() === null) {
          this.tokenClient.requestAccessToken({prompt: 'consent'});
        } else {
          this.tokenClient.requestAccessToken({prompt: ''});
        }
      },

      async getAliases() {
        const { result } = await gapi.client.gmail.users.settings.sendAs.list({'userId': 'me'});

        this.aliases = result.sendAs;
      },

      async updateSignature() {
        const signature = this.createSignaturePage();

        if( this.aliases.length <= 1 ) {
          return await gapi.client.gmail.users.settings.sendAs.update({
            'userId': 'me',
            'sendAsEmail': this.aliases[0].sendAsEmail,
            'signature': signature.innerHTML,
          });
        } else {
          await this.selectAliases();

          return await gapi.client.gmail.users.settings.sendAs.update({
            'userId': 'me',
            'sendAsEmail': this.selectedAliase.sendAsEmail,
            'signature': signature.innerHTML,
          });
        }
      },

      selectAliases() {
        return new Promise( ( resolve ) => {
          this.isShowSelectAliase = true;

          const interval = setInterval( () => {
            if ( this.selectedAliase ) {
              resolve();
              clearInterval( interval );
            }
          }, 500 );
        }).finally(() => this.isShowSelectAliase = false );
      },

      parseJwt(token) {
        const base64Url = token.split('.')[1];
        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));

        return JSON.parse(jsonPayload);
	    },

      clickTab( index ) {
        this.activeTab = this.tabs[ index ];
      },

      saveFile( event ) {
        this.isShowRemoveImage = true;
        this.file = event;
      },

      saveSignatureFile( event ) {
        this.isShowRemoveSignature = true;
        this.signatureFile = event;
      },

      removeImage() {
        this.isShowRemoveImage = false;
        this.file = null;
        this.imageLink = '';
      },

      removeSignature() {
        this.isShowRemoveSignature = false;
        this.signatureFile = null;
        this.signatureLink = '';
      },

      changeTemplates( template ) {
        this.template = template;
      },

      increaseMarginTop() {
        this.marginTop++;
      },

      decreaseMarginTop() {
        this.marginTop--;
      },

      changeLineHeight( newLineHeight ) {
        this.lineHeight = newLineHeight;
      },

      changeColor( newColor ) {
        if( this.color === newColor ) {
          this.color = '';

          return;
        }

        this.color = newColor;
      },

      changeTypeShape( type ) {
        if( this.typeShape === type ) {
            this.typeShape = '';

            return;
        }

        this.typeShape = type;
      },

      changeClassShapeForImage( img, type ) {
        const classListTypeShapes = [
            'typeshape__rounded',
            'typeshape__square',
            'typeshape__circle'
        ];

        classListTypeShapes.forEach( className => {
            if( img.classList.contains( className ) ) {
                img.classList.remove( className );
            }
        });

        img.classList.add( `typeshape__${type}` );
      },

      saveFileBackground( event ) {
        this.fileBackground = event;
      },

      getSignatureDAO() {
        const userDate = JSON.parse(localStorage.getItem('htmlSignature'));

        this.name = userDate.name;
        this.title = userDate.title;
        this.company = userDate.company;
        this.phone = userDate.phone;
        this.website = userDate.website;
        this.fileUrl = userDate.fileUrl;
        this.signatureFileUrl = userDate.signatureFileUrl;
        this.email = userDate.email;
        this.address = userDate.address;
        this.facebook = userDate.facebook;
        this.instagram = userDate.instagram;
        this.linkedin = userDate.linkedin;
        this.twitter = userDate.twitter;
        this.youtube = userDate.youtube;
        this.pinterest = userDate.pinterest;
        this.template = userDate.template;
        this.fontSize = userDate.fontSize;
        this.lineHeight = userDate.lineHeight;
        this.marginTop = userDate.marginTop;
        this.fontFamily = userDate.fontFamily;
        this.color = userDate.color;
        this.typeShape = userDate.typeShape;
        this.imageSize = userDate.imageSize;
        this.imageLink = userDate.imageLink;
        this.signatureSize = userDate.signatureSize;
        this.signatureLink = userDate.signatureLink;
        this.backgroundLink = userDate.backgroundLink;
        this.fileBackground = userDate.fileBackground;
      },

      saveSignatureDTO() {
        localStorage.setItem('htmlSignature', JSON.stringify({
          name: this.name,
          title: this.title,
          company: this.company,
          phone: this.phone,
          website: this.website,
          fileUrl: this.fileUrl,
          signatureFileUrl: this.signatureFileUrl,
          email: this.email,
          address: this.address,
          facebook: this.facebook,
          instagram: this.instagram,
          linkedin: this.linkedin,
          twitter: this.twitter,
          youtube: this.youtube,
          pinterest: this.pinterest,
          template: this.template,
          fontSize: this.fontSize,
          lineHeight: this.lineHeight,
          marginTop: this.marginTop,
          fontFamily: this.fontFamily,
          color: this.color,
          typeShape: this.typeShape,
          imageSize: this.imageSize,
          imageLink: this.imageLink,
          signatureSize: this.signatureSize,
          signatureLink: this.signatureLink,
          backgroundLink: this.backgroundLink,
          fileBackground: this.fileBackground,
        }));
      },

      getImageRef() {
        return this.$refs[`${this.template}UserImage`];
      },

      getUserSignatureRef() {
        return this.$refs[`${this.template}UserSignature`];
      },

      setAttribute( element, attribute, value ) {
        if( element ) {
          element.setAttribute( attribute, value );
         }
      },

      setAttributeForImage( attribute, value ) {
        this.setAttribute(this.getImageRef().querySelector('img'), attribute, value);
      },

      setAttributeForSignature( attribute, value ) {
        this.setAttribute(this.getUserSignatureRef().querySelector('img'), attribute, value);
      },

      isImageExists() {
        return !!this.getImageRef().querySelector('img');
      },

      isSignatureExists() {
        return !!this.getUserSignatureRef().querySelector('img');
      },

      createImageElement( link, ref, styles ) {
        ref.innerHTML = '';
         const imageElem = document.createElement( 'img' );

        imageElem.setAttribute( 'src', link );
        imageElem.setAttribute( 'style', styles );

        ref.append( imageElem );
      },

      createElementWithImage( imageLink ) {
        this.createImageElement( imageLink, this.getImageRef(), this.stylesPreviewUserPicture );
      },

      createElementWithSignature( imageLink ) {
        this.createImageElement( imageLink, this.getUserSignatureRef(), this.stylesPreviewUserSignature );
      },

      validateFormatLink( link, field ) {
        if( link.length > 255 ) {
          this[field] = true; // isInvalibleBackgroundLink || isInvalibleImageLink || isInvalibleSignatureLink

          return false;
        }

        return true;
      },

      clearBackground() {
        this.fileBackground = null;
      },

      createSignaturePage() {
        const html = document.createElement('html');
        const meta = document.createElement('meta');
        const title = document.createElement('title');
        const head = document.createElement('head');
        const body = document.createElement('body');

        title.innerHTML = 'Custom Signature';
        head.appendChild( title );
        meta.setAttribute( 'charset', 'UTF-8' );
        head.appendChild( meta );

        body.innerHTML = this.$refs.signature.innerHTML;

        html.appendChild( head );
        html.appendChild( body );

        let newHTMLDocument = document.implementation.createHTMLDocument();
        const doctype = `<!DOCTYPE html>`;
        newHTMLDocument.innerHTML = doctype + html.innerHTML;

        return newHTMLDocument;
      },

      exportSignatureToHtml() {
        const signature = this.createSignaturePage();

        const htmlToSaveAsURL = this.createUrlForDownloadPreview( signature );

        this.createLinkForDownloadPreview( htmlToSaveAsURL )
      },

      destroyClickedElement(event) {
        document.body.removeChild( event.target );
      },

      createUrlForDownloadPreview( elem ) {
        const htmlToSaveAsBlob = new Blob( [ elem.innerHTML ], { type: 'text/html' } );
        const htmlToSaveAsURL = window.URL.createObjectURL( htmlToSaveAsBlob );

        return htmlToSaveAsURL;
      },

      createLinkForDownloadPreview( url ) {
        const linkEl = document.createElement( 'a' );
        linkEl.setAttribute( 'download', 'signature' );
        linkEl.innerHTML = "Download File";
        linkEl.href = url;
        linkEl.onclick = this.destroyClickedElement;
        linkEl.style.display = "none";
        document.body.appendChild( linkEl );

        linkEl.click();
      }
    },

    created() {
      if( localStorage['htmlSignature'] ) {
        this.getSignatureDAO();
      }
    },

    watch: {
      fontSize( newSize ) {
        this.fontSize = newSize;
      },

      fontFamily( newFontFamily ) {
        this.fontFamily = newFontFamily;
      },

      backgroundLink( link ) {
        if ( !this.validateFormatLink( link, 'isInvalibleBackgroundLink' ) ) return;

        this.isInvalibleBackgroundLink = false;
        this.backgroundLink = link;
      },

      template( template ) {
        if( this.isTemplateWithImage ) {
          this.setAttributeForImage( 'style', this.stylesPreviewUserPicture );
          if( !this.isImageExists() && (this.imageLink || this.fileUrl) ) {
            this.createElementWithImage(this.imageLink || this.fileUrl);
          }
        }
        if( this.isTemplateWithSignature ) {
          this.setAttributeForSignature( 'style', this.stylesPreviewUserSignature );
          if( !this.isSignatureExists() && (this.signatureLink || this.signatureFileUrl) ) {
            this.createElementWithSignature(this.signatureLink || this.signatureFileUrl);
          }
        }
      },

      imageSize: {
        handler( newSize ) {
          for ( const [key, value] of Object.entries( documentSize ) ) {
            if( value ) {
              switch( key ) {
                case 'large':
                  this.minImageSize = '76';
                  this.maxImageSize = '142';
                  this.imageSize = newSize;
                  break;
                case 'medium':
                  this.minImageSize = '66';
                  this.maxImageSize = '132';
                  this.imageSize = newSize;
                  break;
                case 'small':
                  this.minImageSize = '56';
                  this.maxImageSize = '122';
                  this.imageSize = newSize;
                  break;
                case 'xSmall':
                  this.minImageSize = '46';
                  this.maxImageSize = '112';
                  this.imageSize = newSize;
                  break;
                default:
                  this.minImageSize = '66';
                  this.maxImageSize = '132';
                  this.imageSize = '99';
                  break;
              }
            }
          }
        },
        immediate: true,
      },

      signatureSize( newSize ) {
        this.signatureSize = newSize;
      },

      typeShape( type ) {
        if( !this.isImageExists() ) return;

        const img = this.getImageRef().querySelector('img');
        if( !img ) return;

        this.changeClassShapeForImage( img, type );
      },

      file( event ) {
        if ( !event ) {
          if( this.imageLink ) {
            this.setAttributeForImage( 'src', this.imageLink );

            return;
          }

          this.getImageRef().innerHTML = "";

          return;
        }

        if ( event.target.files && event.target.files[0] ) {
          const reader = new FileReader();
          reader.onload = (e) => {
            this.fileUrl = e.target.result;

            this.createElementWithImage( this.fileUrl );
          };
          reader.readAsDataURL( event.target.files[0] );
        }
      },

      signatureFile( event ) {
        if ( !event ) {
          if( this.signatureLink ) {
            this.setAttributeForSignature( 'src', this.signatureLink );

            return;
          }

          this.getUserSignatureRef().innerHTML = "";

          return;
        }

        if ( event.target.files && event.target.files[0] ) {
          const reader = new FileReader();
          reader.onload = (e) => {
            this.signatureFileUrl = e.target.result;

            this.createElementWithSignature( this.signatureFileUrl );
          };
          reader.readAsDataURL( event.target.files[0] );
        }
      },

      imageLink( link ) {
        if ( !this.validateFormatLink( link, 'isInvalibleImageLink' ) ) return;
        this.isInvalibleImageLink = false;

        const img = this.getImageRef().querySelector('img');
        if( link && img ) {
          this.isShowRemoveImage = true;
          this.setAttributeForImage( 'src', link );

          return;
        } else {
          if( this.file ) {
            this.setAttributeForImage( 'src', this.fileUrl );

            return;
          }
        }

        this.createElementWithImage( link );
      },

      signatureLink( link ) {
        if ( !this.validateFormatLink( link, 'isInvalibleSignatureLink' ) ) return;
        this.isInvalibleSignatureLink = false;

        const img = this.getUserSignatureRef().querySelector('img');
        if( link && img ) {
          this.isShowRemoveSignature = true;
          this.setAttributeForSignature( 'src', link );

          return;
        } else {
          if( this.signatureFile ) {
            this.setAttributeForSignature( 'src', this.signatureFileUrl );

            return;
          }
        }

        this.createElementWithSignature( link );
      },

      fileBackground() {
        if ( event.target.files && event.target.files[0] ) {
          const reader = new FileReader();
          reader.onload = (e) => {
            this.fileBackground = e.target.result;
          };
          reader.readAsDataURL( event.target.files[0] );
        }
      }
    },

    computed: {
      isClassicTemplate() {
        return this.template === 'classic';
      },

      isHorizontalTemplate() {
        return this.template === 'horizontal';
      },

      isWideTemplate() {
        return this.template === 'wide';
      },

      isProTemplate() {
        return this.template === 'pro';
      },

      isPro2Template() {
        return this.template === 'pro2';
      },

      isPro3Template() {
        return this.template === 'pro3';
      },

      isPro4Template() {
        return this.template === 'pro4';
      },

      isTemplateWithImage() {
        return this.template === 'classic'    ||
               this.template === 'horizontal' ||
               this.template === 'wide' ||
               this.template === 'pro3' ||
               this.template === 'pro4';
      },

      isTemplateWithSignature() {
        return this.template === 'pro' ||
               this.template === 'pro2' ||
               this.template === 'pro3' ||
               this.template === 'pro4';
      },

      isDisabledBtnMarginTop() {
        return this.marginTop <= 0;
      },

      defineTemplateClass() {
        return this.template || 'classic';
      },

      linkImageTwitter() {
        return this.color
          ? 'https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/twitter.svg?v=1654242023'
          : 'https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/twitter.jpeg?v=1654241532'
      },

      linkImageYoutube() {
        return this.color
          ? 'https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/youtube.svg?v=1654242402'
          : 'https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/youtube.jpeg?v=1650184967'
      },

      linkImagePinterest() {
        return this.color
          ? 'https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/pinterest.svg?v=1654242555'
          : 'https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/pinterest.jpeg?v=1650184886'
      },

      linkImageLinkedin() {
        return this.color
          ? 'https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/linkedin.svg?v=1654242740'
          : 'https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/linkedin.jpeg?v=1650184128'
      },

      linkImageInstagram() {
        return this.color
          ? 'https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/instagram.svg?v=1654242984'
          : 'https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/instagram.jpeg?v=1654241524'
      },

      linkImageFacebook() {
        return this.color
          ? 'https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/facebook.svg?v=1654243139'
          : 'https://cdn.shopify.com/s/files/1/0594/4639/5086/t/40/assets/facebook.jpeg?v=1654241332'
      },

      isShowImageBlock() {
        return !!( this.file || ( this.imageLink && !this.isInvalibleImageLink ) ) ? 'block' : 'none';
      },

      isShowSignatureBlock() {
        return !!( this.signatureFile || ( this.signatureLink && !this.isInvalibleSignatureLink ) ) ? 'block' : 'none';
      },

      isShowSeparatorForBasicInfo() {
        return this.title && this.company;
      },

      textForSeparator() {
        return this.template === 'horizontal'
            ? ' at '
            : ', ';
      },

      hasImage() {
        return this.file || this.imageLink && !this.isInvalibleImageLink;
      },

      hasSignature() {
        return this.signatureFile || this.signatureLink && !this.isInvalibleSignatureLink;
      },

      hasContacts() {
        return this.phone || this.website || this.email || this.address;
      },

      hasSocials() {
        return this.facebook || this.instagram || this.linkedin ||
          this.twitter || this.youtube || this.pinterest;
      },

      isFreeTemplate() {
        return this.template === 'classic' || this.template === 'horizontal' || this.template === 'wide';
      },

      defineColor() {
        return this.color ? this.color : '';
      },

      // for inline styles
      stylesPreviewTemplate() {
        return {
          padding: '5px 18px 10px',
          minHeight: '150px',
          width: '100%',
        }
      },

      stylesPreviewTable() {
        return {
          background: this.isInvalibleBackgroundLink ? '' : `url(${this.backgroundLink || this.fileBackground}) center center / cover no-repeat`,
          lineHeight: this.lineHeight + 'em',
          marginTop: this.marginTop + 'px',
          color: this.color,
          wordBreak: 'break-all',
        }
      },

      stylesPreviewBlockImage() {
        return {
          height: `${this.imageSize}px`,
          width: `${this.imageSize}px`,
          display: this.isShowImageBlock,
        }
      },

      stylesPreviewBlockSignature() {
        if( this.isProTemplate ) {
          return {
            height: `${this.signatureSize}px`,
            width: `${this.signatureSize}px`,
            display: this.isShowSignatureBlock,
            margin: 'auto auto 12px auto',
          }
        }

        return {
          height: `${this.signatureSize}px`,
          width: `${this.signatureSize}px`,
          display: this.isShowSignatureBlock,
        }
      },

      stylesPreviewMainContent() {
        if( this.isProTemplate || this.isPro3Template || this.isPro4Template ) {
          return {
            display: 'flex',
          }
        }

        return {
          display: 'flex',
          marginLeft: '14px',
        }
      },

      stylesPreviewContactContent() {
        if( this.isProTemplate ) {
          const columnGap = this.fontSize * 150;
          const horizontalMargin = this.fontSize * 12;

          return {
            display: 'grid',
            gridTemplateColumns: 'auto auto',
            justifyContent: 'space-between',
            columnGap: `${columnGap}px`,
            marginLeft: `${horizontalMargin}px`,
            marginRight: `${horizontalMargin}px`,
          }
        }

        if( this.isClassicTemplate ) {
          return {
            display: 'flex',
            marginTop: '14px',
            flexWrap: 'wrap',
          }
        }

        return {
          display: 'flex',
          marginTop: '6px',
          flexWrap: 'wrap',
        }
      },

      stylesPreviewContactContentItem() {
        if( this.isPro2Template ) {
          const marginBottom = this.fontSize * 8;

          return {
            display: 'flex',
            alignItems: 'center',
            fontSize: '0.7em',
            marginBottom: `${marginBottom}px`,
            color: '#212121',
          }
        }

        if( this.isPro4Template ) {
          return {
            display: 'flex',
            fontSize: '0.7em',
            color: '#212121',
          }
        }

        if( this.isProTemplate ) {
          const verticalMargin = this.fontSize * 4;

          return {
            display: 'flex',
            alignItems: 'center',
            fontSize: '0.7em',
            margin: `${verticalMargin}px 0`,
          }
        }

        if( this.isClassicTemplate ) {
          return {
            display: 'flex',
            alignTtems: 'center',
            marginRight: '6px',
            marginTop: '6px',
          }
        }

        if( this.isHorizontalTemplate ) {
          return {
            display: 'flex',
            alignItems: 'center',
            fontSize: '0.7em',
            marginRight: '6px',
          }
        }
      },

      stylesPreviewContactContentItemLink() {
        if( this.isProTemplate || this.isPro2Template ) {
          return {
            color: '#688bb5',
            textDecoration: 'none',
            lineHeight: this.lineHeight,
          }
        }

        if( this.isPro3Template ) {
          return {
            color: '#688bb5',
            textDecoration: 'none',
            fontSize: '0.8em',
            lineHeight: this.lineHeight,
          }
        }

        if( this.isPro4Template ) {
          return {
            color: '#688bb5',
            textDecoration: 'none',
            lineHeight: this.lineHeight,
          }
        }

        if( this.isClassicTemplate ) {
          return {
            color: '#45668E',
            fontSize: '0.7em',
          }
        }

        if( this.isWideTemplate ) {
          return {
            color: '#212121',
            textDecoration: 'none',
            whiteSpace: 'nowrap',
            fontSize: '0.6em',
            marginRight: '12px',
          }
        }
      },

      stylesPreviewContactContentItemIcon() {
        if( this.isProTemplate || this.isPro2Template || this.isPro4Template ) {
          const iconSize = this.fontSize * 16;
          const marginRight = this.fontSize * 8;

          return {
            width: `${iconSize}px`,
            height: `${iconSize}px`,
            marginRight: `${marginRight}px`,
          }
        }

        if ( this.isHorizontalTemplate ) {
          return {
            width: '25px',
            height: '25px',
            marginRight: '6px',
          }
        }
      },

      stylesPreviewContactContentItemSpan() {
        if( this.isWideTemplate ) {
          return {
            fontWeight: 'bold',
            fontSize: '0.6em',
            color: this.defineColor || '#45668E',
          }
        }
      },

      stylesPreviewUserPicture() {
        return `display: block; height: 100%; width: 100%; object-fit: cover; border: 2px solid #d9dce5;`;
      },

      stylesPreviewUserSignature() {
        return `display: block; height: 100%; width: 100%; object-fit: contain; border: none; margin: auto;`;
      },

      stylesPreviewMainContentBody() {
        if( this.isPro3Template || this.isPro4Template ) {
          return {
            width: '100%',
            display: 'flex',
            flexDirection: 'column',
            justifyContent: 'center',
            marginTop: '4px',
            marginBottom: '4px',
          }
        }

        return {
          width: '100%',
        }
      },

      stylesPreviewContentInfoFields() {
        if( this.isProTemplate ) {
          const marginBottom = this.fontSize * 4;

          return {
            fontFamily: this.fontFamily,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            marginBottom: `${marginBottom}px`,
          }
        }

        if( this.isPro2Template ) {
          const columnGap = this.fontSize * 80;
          const topMargin = this.fontSize * 20;
          const mainMargin = this.fontSize * 8;

          return {
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            columnGap: `${columnGap}px`,
            margin: `${topMargin}px ${mainMargin}px ${mainMargin}px`,
            fontSize: `${this.fontSize}em`
          }
        }
      },

      stylesPreviewContentNameSeparator() {
        const horizontalMargin = this.fontSize * 10;
        const width = this.fontSize * 2;
        const height = Math.min(this.fontSize, 1.1);

        return {
          backgroundColor: this.color || '#000000',
          marginLeft: `${horizontalMargin}px`,
          marginRight: `${horizontalMargin}px`,
          width: `${width}px`,
          height: `${height}em`,
        }
      },

      stylesPreviewContentFieldName() {
        if( this.isPro2Template || this.isPro3Template || this.isPro4Template ) {
          return {
            textTransform: 'uppercase',
            fontSize: '1.5em',
            lineHeight: '1.1em',
            marginBottom: '0',
            color: this.defineColor || '#45668E',
          }
        }

        if( this.isProTemplate ) {
          return {
            fontSize: '1em',
            fontStyle: 'italic',
          }
        }

        if( this.isClassicTemplate ) {
          return {
            marginTop: '0',
            marginBottom: '6px',
            fontSize: '1.5em',
          }
        }

        if( this.isHorizontalTemplate ) {
          return {
            marginTop: '0',
            color: this.color || '#45668E',
            marginBottom: '0',
            fontSize: '1em',
            fontWeight: '600',
          }
        }

        if( this.isWideTemplate ) {
          return {
            color: this.color || '#45668E',
            fontSize: '0.7em',
            marginBottom: '0',
          }
        }
      },

      stylesPreviewContentFieldTitle() {
        if( this.isPro2Template || this.isPro3Template || this.isPro4Template ) {
          return {
            color: '#000000',
            fontSize: '0.8em',
            fontStyle: 'italic',
          }
        }

        if( this.isProTemplate ) {
          return {
            fontSize: '1em',
            fontStyle: 'italic',
          }
        }

        if( this.isClassicTemplate ) {
          return {
            color: '#45668E',
            fontWeight: '600',
            fontSize: '0.8em',
          }
        }

        if( this.isHorizontalTemplate ) {
          return {
            color: '#45668E',
            fontSize: '0.7em',
          }
        }

        if( this.isWideTemplate ) {
          return {
            fontSize: '0.7em',
            color: '#444',
          }
        }
      },

      stylesPreviewContentSeparatorText() {
        if( this.isPro2Template || this.isPro3Template || this.isPro4Template ) {
          return {
            color: '#000000',
            fontSize: '0.8em',
            fontStyle: 'italic',
          }
        }

        if( this.isProTemplate ) {
          return {
            fontSize: '1em',
            fontStyle: 'italic',
          }
        }

        if( this.isClassicTemplate ) {
          return {
            color: '#45668E',
            fontWeight: '600',
            fontSize: '0.8em',
          }
        }

        if( this.isHorizontalTemplate ) {
          return {
            color: '#45668E',
            fontSize: '0.7em',
          }
        }

        if( this.isWideTemplate ) {
          return {
            fontSize: '0.7em',
            color: '#444',
          }
        }
      },

      stylesPreviewContentSeparatorLine() {
        if( this.isProTemplate || this.isPro2Template || this.isPro3Template ) {
          const verticalMargin = this.fontSize * 6;
          const borderWidth = this.fontSize * 5;

          return {
            margin: `${verticalMargin}px 0 !important`,
            width: '100%',
            border: 'none !important',
            borderTopWidth: `${borderWidth}px !important`,
            borderTopStyle: 'dotted !important',
            borderColor: this.defineColor || 'rgb(69, 102, 142)',
            background: 'none !important',
            opacity: '1',
          }
        }

        if( this.isPro4Template ) {
          return {
            marginTop: this.fontSize * 4 + 'px !important',
            marginBottom: this.fontSize * 16 + 'px !important',
            width: '100%',
            border: 'none !important',
            borderTopWidth: this.fontSize * 4 + 'px !important',
            borderTopStyle: 'dotted !important',
            borderColor: this.defineColor || 'rgb(69, 102, 142)',
            background: 'none !important',
            opacity: '1',
          }
        }

        return {
          margin: '6px 0 !important',
          width: '100%',
          height: '3px !important',
          background: this.defineColor || '#45668E',
          border: 'none',
          opacity: '1',
        };
      },

      stylesPreviewContentSeparatorHLine() {
        return {
          height: '100%',
          border: 'none !important',
          borderRightWidth: this.fontSize * 4 + 'px !important',
          borderRightStyle: 'dotted !important',
          borderColor: this.defineColor || 'rgb(69, 102, 142)',
          background: 'none !important',
          opacity: '1',
        }
      },

      stylesPreviewContentFieldCompany() {
        if( this.isPro2Template || this.isPro3Template || this.isPro4Template ) {
          return {
            color: '#000000',
            fontSize: '0.8em',
            fontStyle: 'italic',
          }
        }

        if( this.isProTemplate ) {
          return {
            fontSize: '1em',
            fontStyle: 'italic',
          }
        }

        if( this.isClassicTemplate ) {
          return {
            color: '#45668E',
            fontWeight: '600',
            fontSize: '0.8em',
          }
        }

        if( this.isHorizontalTemplate ) {
          return {
            color: '#45668E',
            fontSize: '0.7em',
          }
        }

        if( this.isWideTemplate ) {
          return {
            fontSize: '0.7em',
            color: '#444',
          }
        }
      },

      stylesPreviewSocialsNetworks() {
        if( this.isPro2Template ) {
          const verticalMargin = this.fontSize * 20;

          return {
            display: 'flex',
            justifyContent: 'center',
            margin: `${verticalMargin}px 0`,
          }
        }

        return {
          display: 'flex',
          marginTop: '12px',
        }
      },

      stylesPreviewSocialsNetworksItem() {
        if( !this.color ) {
          return {
          marginRight: '2px',
          padding: '0',
        }
        }

        return {
          marginRight: '2px',
          padding: '2px',
        }
      },

      stylesPreviewSocialsNetworksItemImage() {
        return {
          width: '25px',
          height: '25px',
        }
      },

      stylesPreviewPadding() {
        return {
          padding: '4px 0',
        }
      }
    }
  };

  createApp(htmlSignature).mount('#html-signature');
</script>

<style>
  #html-signature {
    width: 100vw;
  }
  #html-signature main {
    display: flex;
    font-family: 'Arial';
    position: relative;
  }
  table:not([class]) {
    table-layout: inherit !important;
  }
  .alert-wrapper {
    position: absolute;
    height: 100%;
    width: 100%;
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
    background: rgba(221, 220, 229, 0.2);
  }
  .alert-content {
    height: auto;
    width: 200px;
    background: #f8dc74;
    padding: 6px;
    border-radius: 5px;
    box-shadow: 0 0 2px RGB(25 28 43 / 4%), 0 4px 8px HSL(237deg 8% 46% / 16%);
  }
  .alert-content__label {
    cursor: pointer;
  }
  .alert-content__label > input {
    cursor: pointer;
  }
  .invalibleLinkInput {
    border-bottom: 1px solid red !important;
  }
  .invalibleLinkLabel {
    color: red !important;
    display: flex;
    justify-content: end;
    font-size: 11px;
  }
  table:not([class]) td, table:not([class]) th {
    padding: inherit;
  }
  body {
    margin: 0;
    padding: 0;
  }
  button:disabled {
    cursor: not-allowed;
  }
  .editor {
    width: 35%;
    min-height: 70vh;
    box-shadow: 0 0 2px rgb(25 28 43 / 4%), 0 4px 8px hsl(237deg 8% 46% / 16%);
  }
  .editor-settings {
    padding: 16px;
  }

  .tabs {
    display: flex;
    justify-content: space-between;
    background-color: #f8f9fb;
    height: 70px;
    padding: 16px;
  }
  .tabs__item {
    cursor: pointer;
    width: 20%;
    border-radius: 5px;
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;
  }

  .tabs__item.active {
    background: #f8dc74;
  }
  .preview-pane-buttons-config {
    display: flex;
  }
  .preview-pane-buttons-config-install {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50%;
  }
  .preview-pane-buttons-config-install__item {
    margin-left: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
  }
  .preview-pane-buttons-config-install__item > img {
    width: 15px;
    height: 15px;
  }
  .preview-pane-buttons-config__save {
    width: 50%;
    border: 0;
    background: #d9dce5;
    border-radius: 0 0 0 8px;
  }

  .details {
    display: flex;
    justify-content: space-between;
  }
  .details-fields {
    width: 70%;
  }
  .details-fields__item {
    display: flex;
    flex-direction: column;
    margin-bottom: 20px;
  }
  .details-fields__item-input {
    outline: none;
    border: none;
    padding: 5px;
    border-bottom: 1px solid #ccc;
  }
  .details-fields__item-label {
    color: #888;
    font-size: 13px;
  }
  .details-media {
    display: flex;
    flex-direction: column;
    width: 27%;
    align-items: center;
    justify-content: flex-start;
    gap: 5%;
  }
  .details-signature,
  .details-images {
    width: 100%;
    height: 150px;
    display: flex;
    flex-direction: column;
  }
  .details-signature__btn,
  .details-images__btn {
    cursor: pointer;
    color: #1cb4e7;
    background: none;
    border: none;
    width: 100%;
    margin-top: 6px;
  }
  .details-signature__box,
  .details-images__box {
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    width: 100%;
    height: 70%;
    background-color: #f8f9fb;
    border: 1px dashed rgba(0,0,0,.3);
    border-radius: 4px;
  }
  .details-signature__box-input,
  .details-images__box-input {
    position: absolute;
    opacity: 0;
    visibility: hidden;
  }
  .details-signature__box-label,
  .details-images__box-label {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    cursor: pointer;
  }

  .socials {
    display: flex;
    flex-direction: column;
  }
  .socials__item {
    display: flex;
    align-items: center;
    margin-bottom: 24px;
  }
  .socials__item:last-child {
    margin-bottom: 0;
  }
  .socials__item-icon {
    width: 32px;
    border-radius: 50%;
    margin-right: 12px;
  }
  .socials__item-field {
    display: flex;
    flex-direction: column;
    width: 80%;
  }
  .socials__item-field_label {
    color: #888;
    font-size: 13px;
  }
  .socials__item-field_input {
    outline: none;
    border: none;
    padding: 5px;
    border-bottom: 1px solid #ccc;
  }

  .templates {
    display: flex;
    flex-wrap: wrap;
    margin-bottom: 16px;
  }
  .templates__item {
    min-height: 140px;
    background: none;
    margin-top: 16px;
    border: none;
    cursor: pointer;
    width: 48%;
    margin-right: 6px;
    border: 2px solid #e8e8e8;
    border-radius: 6px;
    font-weight: 600;
  }
  .templates__item_img {
    width: 100%;
    margin-bottom: 12px;
  }
  .activeTemplate {
    border: 2px solid #1cb4e7;
  }

  .setup {
    display: flex;
    flex-direction: column;
  }
  .setup__item {
    display: flex;
    margin-bottom: 24px;
  }
  .setup__item-content-box {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    width: 100%;
    background-color: #f8f9fb;
    border: 1px dashed rgba(0, 0, 0, 0.3);
    border-radius: 4px;
  }
  .setup__item-content-box_spec_symbol {
    position: absolute;
    right: -14px;
  }
  .setup__item-content-box_label {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
  }
  .setup__item-content-box_file {
    position: absolute;
    opacity: 0;
    visibility: hidden;
  }
  .setup__item_label {
    width: 40%;
    color: #6b6c7e;
    font-size: 14px;
  }
  .setup__item-content {
    width: 60%;
    display: flex;
    justify-content: space-between;
  }
  .setup__item-content-wrapper-for-input {
    width: 100%;
  }
  .setup__item-content .teal {
    background: teal;
  }
  .setup__item-content .maroon {
    background: maroon;
  }
  .setup__item-content .chartreuse {
    background: chartreuse;
  }
  .setup__item-content .darkgreen {
    background: darkgreen;
  }
  .setup__item-content .turquoise {
    background: turquoise;
  }
  .setup__item-content .brown {
    background: brown;
  }
  .setup__item-content .purple {
    background: purple;
  }
  .custom-color {
    padding: 0;
    border: 0;
  }

  .setup__item-content .activeColor {
    opacity: 1;
    width: 16px;
    height: 16px;
    border: 2px solid #1cb4e7;
  }
  .setup__item-content_picker-color {
    width: 18px;
    height: 18px;
    cursor: pointer;
    opacity: .5;
  }
  .setup__item-content_select {
    width: 100%;
    border: none;
    border-bottom: 1px solid #eaedf1;
    padding: 0 4px 4px 0;
    cursor: pointer;
    outline: none;
  }
  .setup__item-content_range {
    width: 100%;
    cursor: pointer;
    appearance: none;
  }
  .setup__item-content_range::-webkit-slider-runnable-track {
    border-radius: 4px;
    height: 7px;
    background-color: #eaedf1;
  }
  .setup__item-content_range::-webkit-slider-thumb {
    background: #1cb4e7;
    border-radius: 50%;
    width:15px;
    height: 15px;
    -webkit-appearance: none;
    margin-top: -4px;
  }
  .setup__item-content_range::-moz-range-track {
    border-radius: 50%;
    height: 5px;
    border: 1px solid #1cb4e7;
    background-color: #eaedf1;
  }
  .setup__item-content_range::-moz-range-thumb {
    background: #eaedf1;
    border: 1px solid #1cb4e7;
    border-radius: 50%;
  }
  .setup__item-content_counter {
    width: 33.33%;
    color: #000;
    font-weight: 700;
    text-align: center;
    padding: 4px 0 4px 0;
    background-color: #ffffff;
    border: 1px solid #eaedf1;
    font-size: 14px;
  }
  .setup__item-content_button {
    padding: 4px 0 4px 0;
    color: #6b6c7e;
    background-color: #ffffff;
    border: none;
    border: 1px solid #eaedf1;
    cursor: pointer;
    font-weight: 700;
    width: 33.3%;
  }
  .setup__item-content_button:disabled {
    background: #eaedf1;
  }
  .setup__item-content_button:first-child {
    border-radius: 4px 0 0 4px;
  }
  .setup__item-content_button:last-child {
    border-radius: 0 4px 4px 0;
  }
  .btn-center-norm-border {
    border-left: none;
    border-right: none;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .activelinespacing {
    color: #1cb4e7;
    background: #eaedf1;
  }

  .setup__item-content_input {
    width: 100%;
    outline: none;
    border: none;
    border-bottom: 1px solid #eaedf1;
    padding: 0 4px 4px 0;
  }
  .activeImageBtn {
    color: #1cb4e7;
    background: #eaedf1;
  }

  .preview {
    width: 65%;
    display: flex;
    margin-top: 16px;
    justify-content: center;
  }
  .preview-pane {
    width: 80%;
    height: max-content;
    border-radius: 8px;
    box-shadow: 0 0 2px RGB(25 28 43 / 4%), 0 4px 8px HSL(237deg 8% 46% / 16%);
    border-radius: 8px;
  }

  .preview-pane-header {
    background: #d9dce5;
    height: 32px;
    display: flex;
    align-items: center;
    border-radius: 8px 8px 0 0;
  }
  .preview-pane-header__dots {
    width: 13px;
    height: 13px;
    border-radius: 50%;
    margin-left: 7px;
    background-color: #eceef4;
  }
  .preview-pane-details {
    padding: 5px 18px 10px;
    color: #8f8f8f;
  }
  .preview-pane-details__item {
    padding: 4px;
    border-bottom: 1px solid #d9dce5;
  }
  .preview-pane-details__item-text {
    font-weight: 700;
  }
  .preview-pane-details__item-to {
    font-weight: 700;
    padding: 1px 10px;
    border-radius: 20px;
    border: 1px solid #d9dce5;
  }

  .typeshape__circle {
    border-radius: 50%;
  }
  .typeshape__square {
    border-radius: 0;
  }
  .typeshape__rounded {
    border-radius: 25%;
  }

  @media (max-width: 1300px) {

  }

  @media (max-width: 1199px) {
    .tabs {
      justify-content: normal;
    }
    .tabs__item {
      width: 25%;
    }
  }

  @media (max-width: 991px) {
    .details {
      flex-direction: column;
    }
    .details-fields {
      width: 100%;
    }
    .details-media {
      width: 100%;
    }
    .details-signature,
    .details-images {
      height: auto;
      width: 100%;
    }
    .details-images__box {
      height: 50px;
    }
    .editor {
      width: 50%;
    }
    .preview-pane {
      width: 90%;
    }
  }

  @media (max-width: 767px) {
    main {
      flex-direction: column;
    }
    .editor {
      width: 100%;
    }
    .preview {
      width: 100%;
    }
    .socials__item-field {
      width: 100%;
    }
    .setup__item-content {
      width: 90%;
    }
  }

  @media (max-width: 575px) {
    .setup__item-content {
      width: 80%;
    }
    .preview-pane-brending-horizontal-content {
      width: 100%;
    }
    .preview-pane-brending-horizontal-content-contact {
      flex-direction: column;
    }
    .preview-pane-brending-horizontal-content-contact__field {
      margin-top: 6px;
    }
    .preview-pane-brending-horizontal-content-contact__field:first-child {
      margin-top: 0;
    }
  }
</style>
